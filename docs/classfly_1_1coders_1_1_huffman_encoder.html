<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libfly: fly::coders::HuffmanEncoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfly
   &#160;<span id="projectnumber">6.2.1</span>
   </div>
   <div id="projectbrief">C++20 utility library for Linux, macOS, and Windows</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classfly_1_1coders_1_1_huffman_encoder.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classfly_1_1coders_1_1_huffman_encoder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">fly::coders::HuffmanEncoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="huffman__encoder_8hpp_source.html">huffman_encoder.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for fly::coders::HuffmanEncoder:</div>
<div class="dyncontent">
<div class="center"><img src="classfly_1_1coders_1_1_huffman_encoder__inherit__graph.png" border="0" usemap="#afly_1_1coders_1_1_huffman_encoder_inherit__map" alt="Inheritance graph"/></div>
<map name="afly_1_1coders_1_1_huffman_encoder_inherit__map" id="afly_1_1coders_1_1_huffman_encoder_inherit__map">
<area shape="rect" title=" " alt="" coords="5,155,209,181"/>
<area shape="rect" href="classfly_1_1coders_1_1_binary_encoder.html" title=" " alt="" coords="12,80,203,107"/>
<area shape="rect" href="classfly_1_1coders_1_1_encoder.html" title=" " alt="" coords="33,5,181,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for fly::coders::HuffmanEncoder:</div>
<div class="dyncontent">
<div class="center"><img src="classfly_1_1coders_1_1_huffman_encoder__coll__graph.png" border="0" usemap="#afly_1_1coders_1_1_huffman_encoder_coll__map" alt="Collaboration graph"/></div>
<map name="afly_1_1coders_1_1_huffman_encoder_coll__map" id="afly_1_1coders_1_1_huffman_encoder_coll__map">
<area shape="rect" title=" " alt="" coords="5,155,209,181"/>
<area shape="rect" href="classfly_1_1coders_1_1_binary_encoder.html" title=" " alt="" coords="12,80,203,107"/>
<area shape="rect" href="classfly_1_1coders_1_1_encoder.html" title=" " alt="" coords="33,5,181,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af4e3279e0e4f109d05b22a7585c6b974"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfly_1_1coders_1_1_huffman_encoder.html#af4e3279e0e4f109d05b22a7585c6b974">HuffmanEncoder</a> (const std::shared_ptr&lt; <a class="el" href="classfly_1_1coders_1_1_coder_config.html">CoderConfig</a> &gt; &amp;config) noexcept</td></tr>
<tr class="separator:af4e3279e0e4f109d05b22a7585c6b974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfly_1_1coders_1_1_encoder"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfly_1_1coders_1_1_encoder')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfly_1_1coders_1_1_encoder.html">fly::coders::Encoder</a></td></tr>
<tr class="memitem:a50fdd5bba674df5f86828381c439488f inherit pub_methods_classfly_1_1coders_1_1_encoder"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfly_1_1coders_1_1_encoder.html#a50fdd5bba674df5f86828381c439488f">~Encoder</a> ()=default</td></tr>
<tr class="separator:a50fdd5bba674df5f86828381c439488f inherit pub_methods_classfly_1_1coders_1_1_encoder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d79de3d9e35043cee9e8e6c723bb4c3 inherit pub_methods_classfly_1_1coders_1_1_encoder"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfly_1_1coders_1_1_encoder.html#a0d79de3d9e35043cee9e8e6c723bb4c3">encode_string</a> (const std::string &amp;decoded, std::string &amp;encoded)</td></tr>
<tr class="separator:a0d79de3d9e35043cee9e8e6c723bb4c3 inherit pub_methods_classfly_1_1coders_1_1_encoder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b97679aab3d0ff7996b66d80d18c655 inherit pub_methods_classfly_1_1coders_1_1_encoder"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfly_1_1coders_1_1_encoder.html#a9b97679aab3d0ff7996b66d80d18c655">encode_file</a> (const std::filesystem::path &amp;decoded, const std::filesystem::path &amp;encoded)</td></tr>
<tr class="separator:a9b97679aab3d0ff7996b66d80d18c655 inherit pub_methods_classfly_1_1coders_1_1_encoder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad7a36e8602737e2c4753c5f8bc1778c9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfly_1_1coders_1_1_huffman_encoder.html#ad7a36e8602737e2c4753c5f8bc1778c9">encode_binary</a> (std::istream &amp;decoded, <a class="el" href="classfly_1_1_bit_stream_writer.html">fly::BitStreamWriter</a> &amp;encoded) override</td></tr>
<tr class="separator:ad7a36e8602737e2c4753c5f8bc1778c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfly_1_1coders_1_1_binary_encoder"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfly_1_1coders_1_1_binary_encoder')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfly_1_1coders_1_1_binary_encoder.html">fly::coders::BinaryEncoder</a></td></tr>
<tr class="memitem:abc14c04e0561fd02f487f12bd8835c89 inherit pro_methods_classfly_1_1coders_1_1_binary_encoder"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfly_1_1coders_1_1_binary_encoder.html#abc14c04e0561fd02f487f12bd8835c89">encode_internal</a> (std::istream &amp;decoded, std::ostream &amp;encoded) final</td></tr>
<tr class="separator:abc14c04e0561fd02f487f12bd8835c89 inherit pro_methods_classfly_1_1coders_1_1_binary_encoder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the <a class="el" href="classfly_1_1coders_1_1_encoder.html">Encoder</a> interface for Huffman coding. Forms length-limted, canonical Huffman codes to encode symbols.</p>
<dl class="section author"><dt>Author</dt><dd>Timothy Flynn (<a href="#" onclick="location.href='mai'+'lto:'+'trf'+'ly'+'nn8'+'9@'+'pm.'+'me'; return false;">trfly<span style="display: none;">.nosp@m.</span>nn89<span style="display: none;">.nosp@m.</span>@pm.m<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>July 7, 2019 </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af4e3279e0e4f109d05b22a7585c6b974"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4e3279e0e4f109d05b22a7585c6b974">&#9670;&nbsp;</a></span>HuffmanEncoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fly::coders::HuffmanEncoder::HuffmanEncoder </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classfly_1_1coders_1_1_coder_config.html">CoderConfig</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Reference to coder configuration. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad7a36e8602737e2c4753c5f8bc1778c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7a36e8602737e2c4753c5f8bc1778c9">&#9670;&nbsp;</a></span>encode_binary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool fly::coders::HuffmanEncoder::encode_binary </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>decoded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfly_1_1_bit_stream_writer.html">fly::BitStreamWriter</a> &amp;&#160;</td>
          <td class="paramname"><em>encoded</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Huffman encode a stream.</p>
<p>If the input stream is large, in order to limit memory usage, the stream is encoded in chunks. Each chunk is treated as its own input stream, and the encoding sequence is repeated for each chunk.</p>
<p>The first bytes of the output stream are reserved as a header. Currently, the header contains: the incurred BitStream header, the version of the Huffman coder used to encode the stream, the maximum chunk length used to to split large streams (in kilobytes), and the maximum allowed Huffman code length: </p><pre class="fragment">|      8 bits      |  8 bits |      16 bits      |      8 bits     |
--------------------------------------------------------------------
| BitStream header | Version | Chunk length (KB) | Max code length |
</pre><p> The sequence to encode a stream is: </p><pre class="fragment">1. Create a Huffman tree from the input stream.
2. Generate standard Huffman codes from the Huffman tree.
3. Length-limit the standard Huffman codes.
4. Convert the length-limited codes to canonical Huffman codes.
5. Encode the canonical codes.
6. Encode the input stream using the canonical codes.
</pre><p> This sequence involves iterating over the entire input stream twice (to create the Huffman tree and to encode the stream).</p>
<p>The coder does not assume the Huffman codes are retained between calls. Thus, the codes are encoded before the input stream (step 5) so that they may be learned during decoding.</p>
<p>Length-limiting is performed on the generated Huffman codes to improve decoder performance. Worst-case, a Huffman code could have the same length as the maximum number of symbols. Limiting the length of Huffman codes awards a significant decoder performance improvement, while only incurring a small cost in compression ratio.</p>
<p>Canonical form is used for its property of generally being describable in fewer bits than standard form. When in canonical form, the Huffman codes are sorted by code length. With this sorting, the count of the number of symbols for each code length is computed: (N0, N1, N2, ..., Nn), where N&lt;n&gt; is the number of symbols of code length &lt;n&gt;. Call the length of this list NN.</p>
<p>The encoding of canonical Huffman codes then becomes: </p><pre class="fragment"> NN,N0,N1,N2,...,Nn,S0,S1,S2,...,Sn
</pre><p> Where S&lt;n&gt; is all symbols of code length &lt;n&gt;.</p>
<p>Encoding the input stream (step 6) consists of reading each symbol from the input stream and outputting that symbol's canonical Huffman code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">decoded</td><td>Stream holding the contents to encode. </td></tr>
    <tr><td class="paramname">encoded</td><td>Stream to store the encoded contents.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the input stream was successfully encoded. </dd></dl>

<p>Implements <a class="el" href="classfly_1_1coders_1_1_binary_encoder.html#ab2e21b05a085734ab0a724f1f88c004e">fly::coders::BinaryEncoder</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>fly/coders/huffman/<a class="el" href="huffman__encoder_8hpp_source.html">huffman_encoder.hpp</a></li>
<li>fly/coders/huffman/huffman_encoder.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>fly</b></li><li class="navelem"><b>coders</b></li><li class="navelem"><a class="el" href="classfly_1_1coders_1_1_huffman_encoder.html">HuffmanEncoder</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
